---
import ColorPicker from './ColorPicker.svelte';
import SiteNav from './SiteNav.astro';
import Toggle from './Toggle.svelte';
interface Props {}
---

<header class="site-header">
  <ColorPicker client:only="svelte" />
  <Toggle client:only="svelte" />
  <SiteNav
    links={[
      {
        name: 'Home',
        route: '/',
        icon: 'home',
      },
      {
        name: 'Resume',
        route: '/resume',
        icon: 'file-user',
      },
    ]}
  />
</header>

<script>
  const header = document.querySelector('.site-header');
  let lastPosition = 0;
  let timeoutId: number;

  document.addEventListener('scroll', (e) => {
    if (timeoutId) clearTimeout(timeoutId);

    if (lastPosition < window.scrollY && window.scrollY > 0) {
      header?.classList.add('is-collapsed');
    } else {
      header?.classList.remove('is-collapsed');
    }

    lastPosition = window.scrollY;
  })

  document.addEventListener('scrollend', () => {

    timeoutId = setTimeout(() => {
      header?.classList.remove('is-collapsed');

    }, 2000);
  })

</script>

<style>
  .site-header {
    display: flex;
    align-items: center;
    justify-content: end;
    position: fixed;
    right: 0;
    z-index: 100;
    transition: transform 250ms linear;
    width: 100%;
  }

  .site-header.is-collapsed {
    transform: translateY(-100px);
  }

  @media print {
    .site-header {
      display: none;
    }
  }

</style>
